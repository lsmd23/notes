- 目前，绝大多数的设备都是无线连接而非有线连接，无线通信和移动通信技术在现代社会中扮演着至关重要的角色
# 无线网络概述
- 无线网络是一种通过无线电波传输数据的网络，允许设备在没有物理连接的情况下进行通信
- 无线网络的组成：
	- 无线主机：连接到无线网络的设备，如智能手机、笔记本电脑、平板电脑等
	- 基站（base station）：负责管理无线主机的连接和通信，一般和有线网络相连，例如Wi-Fi路由器或蜂窝基站
	- 无线链路：连接无线主机和基站的通信信道，不同的技术有不同的传输速率和覆盖范围
- 无线网络的模式：
	- 基础设施模式（infrastructure mode）：无线主机通过基站连接到有线网络，支持切换（handoff）——当无线主机移动时，能够在不同基站之间切换连接而不中断通信
	- 自组织模式（ad hoc mode）：无线主机直接相互通信，无需基站。节点只能在彼此的传输范围内通信，适用于临时网络
# 无线链路网络特征
- 核心差异：
	- 信号衰减：无线信号依赖电磁波传播，距离越远信号越弱，在穿过物体时也会衰减（称为路径损耗（path loss））
	- 多源干扰：标准化无线频段被各种电磁波设备共享（微波炉、蓝牙设备等），导致噪声，不同设备之间也会相互干扰
	- 多径传播（multipath propagation）：无线信号在传播过程中可能被反射、折射或散射，导致接收端收到多个不同路径的信号，可能引起信号的干涉导致信号波动
- 关键指标：
	- 信噪比（Signal-to-Noise Ratio, SNR）：信号功率与噪声功率的比值，通常以分贝（dB）为单位表示。也使用这一值的$\frac{1}{20}$度量信噪比
	- 误码率（Bit Error Rate, BER）：传输过程中错误比特数与总传输比特数的比值，衡量通信质量
		- 对给定的物理层技术，BER和SNR为负相关关系
		- 对给定的SNR，比特传输率和BER为正相关关系
		- 在实际应用中，当SNR改变时，无线网络会自动切换物理层的技术，以在不同的传输速率和误码率之间取得平衡
- 传输冲突问题：
	- 隐藏终端问题（hidden terminal problem）：两个节点A和C都能与节点B通信，但A和C之间无法直接通信，可能导致A和C同时向B发送数据引发冲突
		- 如图：![[Pasted image 20251119155615.png]]
	- 信号衰减问题（signal attenuation problem）：节点A和C都能与节点B通信，但A和C之间的距离较远，因而A和C之间无法感知对方的存在，但B能同时接收到A和C的信号，可能导致冲突
		- 如图：![[Pasted image 20251119155704.png]]
## CDMA协议
- 码分多址（Code Division Multiple Access, CDMA）：属于一种信道划分协议，为无线通信的信道分配提供了一种有效的解决方案
	- 编码过程：
		- 在发送端，以**码片速率**（chipping rate），存在一个不断变化的数比特的编码
		- 码片速率比实际的信号速率要大得多，例如，若信号速率为1kbps，码片速率可能为1Mbps
		- 实际的信道输出是信号与编码的逐位异或（XOR）结果
		- 示意图：![[Pasted image 20251119160204.png]]
	- 解码过程：
		- 在接收端，使用与发送端相同的编码对接收到的信号进行解码
		- 通过与编码的逐位异或操作，可以恢复出原始信号
		- 示意图：![[Pasted image 20251119160220.png]]
	- 多端通信的信道划分：
		- CDMA基于在同一时刻，如果接收端收到多个信号，这些信号之间是叠加关系
		- 通过简单的数学推导即可得出，在发送端编码都为**正交编码**的情况下（也即内积为0），只要接收端知道每个发送端的编码，就可以从叠加信号中恢复出每个发送端的信号
		- 示意图：![[Pasted image 20251119160450.png]]
# WiFi：802.11无线局域网
- 目前最广泛的无线局域网技术，基于IEEE 802.11标准，不同的子标准有不同的工作频段和最大传输速率（例如2.4GHz和5GHz频段）
- WiFi网络架构：
	- 基本服务集（Basic Service Set, BSS）：由一个或多个无线站点和一个中央基站（也被称为接入点（Access Point, AP））组成
		- 属于基础设施模式
		- 每个中央基站对应一个局域网，称为基础设施无线局域网，有唯一的服务集标识（Service Set Identifier, SSID）来区分
		- 每个无限站点都对应一个局域网中的MAC地址，称为BSS地址
		- 同样也有没有中央基站的自组织模式
	- 信道关联：
		- 每个无限站点需要和一个AP进行关联，才能加入一个子网并进行通信
		- 为确保无限站点知道自己所属的AP，需要通过某种机制实现：
			- 被动扫描（passive scanning）：
				- 每个AP会周期性发送信标帧（beacon frame），其中包含SSID和BSS地址等信息
				- 无限站点通过扫描信道，接收信标帧来发现可用的AP，并选择一个进行关联
			- 主动扫描（active scanning）：
				- 无限站点发送探测请求帧（probe request frame），请求附近的AP响应
				- AP收到请求后，发送探测响应帧（probe response frame），其中包含SSID和BSS地址等信息
				- 无限站点根据收到的响应帧，发送关联请求帧（association request frame）请求与AP关联，AP收到请求后，发送关联响应帧（association response frame）确认关联
				- 这一过程是一个**两次握手**过程
- 多路访问协议：
	- 已有的有线网络信道划分协议（参见[[S5 链路层#多路访问协议(MAC)|链路层——多路访问协议]]）由于无线信号的隐藏终端、信号衰减等问题，难以直接应用于无线网络
	- 带碰撞避免的CSMA协议（**CSMA/CA**协议）
		- 发送端：
			- 监听信道是否空闲
			- 若空闲，等待一个**分布式帧间间隔**（Distributed Inter-Frame Space, **DIFS**）后发送完整的数据帧
			- 忙时退避：若信道忙，启动随机退避计时器（时隙的整数倍），倒计时期间若空闲，在倒计时结束后发送数据帧；否则，重启倒计时等待
			- 重传：若发送端未在帧间间隔（**SIFS**）内收到确认帧（ACK），则认为数据帧丢失，增大退避窗口间隔并重传
		- 接收端：
			- 接受数据帧后，在SIFS内发送ACK
			- 若数据帧损坏，或未收到数据帧，则不发送ACK
		- 示意图：![[Pasted image 20251119163444.png]]
	- 处理隐藏终端：RTS-CTS机制
		- 发送端在发送数据帧前，先发送一个短的请求发送帧（Request to Send, RTS），并声明数据传输的时间
		- 接收端收到RTS后，广播一个清除发送帧（Clear to Send, CTS），通知其他节点在指定时间内不要发送数据
		- 发送端在收到CTS后，等待一个SIFS后发送数据帧。其他节点在收到CTS后，等待指定时间后再竞争信道
		- 示意图：![[Pasted image 20251119163805.png]]
- 帧结构：
	- 结构：数字代表字节长度![[Pasted image 20251119163846.png]]
		- 有效载荷与CRC：承载上层协议数据和[[S5 链路层#^812c2a|循环冗余校验码]]
		- 地址字段：有4个，用于标识发送方和接收方的MAC地址
			- 地址1：接收方MAC地址
			- 地址2：发送方MAC地址
			- 地址3：BSS地址（子网在路由器上的接口的地址）
			- 地址4：仅在无线分布式系统中使用，标识最终目的地或源地址
		- 序号字段：用于[[S3 运输层#可靠数据传输(RDT)|可靠传输协议]]的序号标识
		- 持续期字段：用于RTS-CTS机制，声明数据传输的时间
		- 帧控制字段：
			- 结构：数值代表比特长度![[Pasted image 20251119164444.png]]
			- 功能：标识帧类型（管理帧、控制帧、数据帧）、协议版本、加密等信息
- 在相同IP子网的可移动性：
	- 当无线主机在同一IP子网内移动时，无需更改IP地址，只需与新的AP重新关联即可
	- 过程：
		1. 无线主机检测到信号变弱，开始扫描附近的AP
		2. 选择一个新的AP，发送关联请求帧
		3. 新AP收到请求后，发送关联响应帧确认关联
		4. 无线主机与新AP建立连接，继续通信
		- 对交换机，新的AP应当该通知交换机更新其交换表，将无线主机的MAC地址映射到新的AP端口
- 802.11的高级特性：
	- 速率适应：实时地检测当前的信噪比，根据信噪比动态选择下层的物理层调制技术，调整传输速率（也会受制于上层协议如[[S3 运输层#TCP拥塞控制|TCP的拥塞控制]]机制）
	- 功率管理：AP通过帧管理段的某些比特，了解某些无线主机即将进入休眠状态，从而减少不必要的通信，节省能量。在通信时，主机唤醒以接受AP的所有缓存的数据
- 其他网络类型
	- 蓝牙：基于802.15.1标准的个人域网络
		- 工作频段：2.4GHz ISM频段
		- 时隙长度625微秒，传输速率大致在1Mbps到3Mbps之间
		- 低功率，适用于短距离通信
	- ZigBee：基于802.15.4标准的个人域网络
		- 工作频段：2.4GHz、868MHz和915MHz频段
		- 传输速率最高可达250kbps
		- 低功耗，适用于物联网设备的通信
	- WiMAX：基于802.16标准的广域无线网络
		- 工作频段：2GHz到66GHz频段
		- 传输速率可达数十Mbps，覆盖范围可达数十公里
		- 适用于城市级别的宽带无线接入和移动通信
# 蜂窝因特网
- 基于蜂窝电话技术的无线广域网，允许用户在广泛的地理区域内进行无线通信
- 蜂窝网体系结构：
	- 蜂窝（cellular）：由一个基站和其覆盖的区域组成，每个基站间通过分频等方式避免干扰
	- 移动交换中心（Mobile Switching Center, MSC）：负责管理多个蜂窝基站，接入广域网，处理语音/数据呼叫的建立，并控制各个蜂窝之间的切换
	- 示意图：![[Pasted image 20251119171653.png]]
- 蜂窝网的多路访问：
	- FDMA/TDMA结合技术：参见[[S5 链路层#信道划分协议|链路层——信道划分协议]]
		- 应用于2G蜂窝网络（如GSM）
	- 码分多址（CDMA）技术：参见[[S6 无线网络与移动网络#CDMA协议|无线网络——码分多址协议]]
		- 应用于2G和3G蜂窝网络，频谱利用率更高
- 蜂窝网的演进：
	- 1G：模拟通信系统，主要用于语音通信
	- 2G：以语音为主的数字通信系统，引入了短信和基本的数据服务
		- 基本采用FDMA/TDMA技术，也有部分采用CDMA技术
	- 2.5G：语音+数据的通信系统，引入了GPRS和EDGE技术，提高了数据传输速率
	- 3G：以数据为主的通信系统，支持多媒体服务和高速数据传输
		- 主要采用CDMA技术
	- 4G：全IP网络，支持高清视频、在线游戏等高带宽应用
		- 采用正交频分多址（Orthogonal Frequency Division Multiple Access, OFDMA）技术，提高了频谱效率和抗干扰能力
	- 5G：支持大规模物联网、超低延迟通信和高可靠性应用
		- 采用多种先进技术，如大规模MIMO（Multiple Input Multiple Output）、毫米波通信等，进一步提升网络性能
# *调制与解调技术*
- 调制（modulation）：将0101的数字信号加载到高频的载波信号的过程，从而使得信号适合无线传输
- 信号与调制：
	- 信号：一般都是正弦信号，使用复数表示为：$$s(t)=Ae^{j(2\pi f_ct+\phi)}$$
		- 其中$A$为振幅，$f_c$为频率，$\phi$为初相位
	- 调制方法：
		- 振幅调制（Amplitude Modulation, AM）：通过改变载波的振幅来表示数字信号
		- 频率调制（Frequency Modulation, FM）：通过改变载波的频率来表示数字信号
		- 相位调制（Phase Modulation, PM）：通过改变载波的相位来表示数字信号
		- 示意图：![[Pasted image 20251119172750.png]]
		- 无线网中，考虑传播的噪声、干扰等等，一般采用相位调制技术
			- 例：![[Pasted image 20251119172852.png]]
- 调制技术：
	- 多进制调制技术：
		- 通过改变载波的多个属性（振幅、相位、频率）来表示多个比特
		- 调制密度：每个符号表示的比特数，值为$\log_2M$，其中$M$为调制的状态数
		- 例：![[Pasted image 20251119173117.png]]
	- 正交振幅调制（Quadrature Amplitude Modulation, QAM）：
		- 结合振幅调制和相位调制，通过同时改变载波的振幅和相位来表示多个比特
		- 例：![[Pasted image 20251119173200.png]]
- 香农定理：描述带噪声信道下的最大数据传输速率
	- 定理内容：在带宽为$B$赫兹，信噪比为SNR的信道中，最大数据传输速率$C$（信道容量）由下式给出：$$C = B \log_2(1 + \text{SNR})$$
	- 含义：
		- 提供了信道容量的理论上限，指导无线通信系统的设计
		- 通过增加带宽或提高信噪比，可以提升信道容量
		- 实际系统中，通常无法达到香农定理的极限，但可以通过先进的调制和编码技术接近这一极限