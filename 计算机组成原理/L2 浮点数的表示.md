- 可以观察到，如果采用定点数（即小数点固定在某一位处）表示小数，在计算中会产生误差
```python
>>> print(2.1+3.2)
5.300000000000001
```
# 浮点数的定义：IEEE754
- 形式：将数表示为$(-1)^s\cdot M\cdot 2^E$，符号位存储$s$，后面两个字段编码表示$M$和$E$（尾数与阶码），类似于科学计数法的表示
	- ![[Pasted image 20250929101405.png]]
- 规格化数：阶码不是0或max，表示为科学计数法
	- 例：`F=15213.0`的表示
		- $15213_{10}=1.1101101101101_2\times 2^{13}$
		- 阶码：`E=Exp-Bias`，对单精度数，`Bias`取`127`，双精度数则取`1023`（$\text{Bias}=2^{k-1}-1$，$k$为阶码位数）
		- 尾数：省去最开头的1，多出1个有效位
		- `Exp=Bias+E=127+13=140=10001100(b)`![[Pasted image 20250929102210.png]]
- 非规格化数：阶码全为0
	- 此时，尾数部分编码全部的位，也即`0.xxxxxxx`的编码
	- 用于编码0附近的小数
- 特殊值：
	- 阶码全为1，尾数全为0，表示无穷大$\infty$
	- 阶码全为1，尾数不全为0，表示`NaN`（不是数）
- 如图：![[Pasted image 20250929103322.png]]
## 例：8位浮点数
- 定义：1位符号位，4位阶码，3位尾数
- 如表：![[Pasted image 20250929103451.png]]
	- 特点：在0附近的数密度更大![[Pasted image 20250929105521.png]]
# 浮点数的运算
- 舍入：
	- 向零舍入
	- 向正无穷舍入
	- 向负无穷舍入
	- 向偶数舍入（默认）：多数情况下就是四舍五入，除非当在两个整数中间时，向偶数的整数舍入
	- 例：![[Pasted image 20250929111156.png]]
	- 注：计算机中是**按二进制位进行的舍入！**
- 乘法：
	1. 计算符号位$s=s_1 \oplus s_2$
	2. 计算阶码$E=E_1+E_2$
	3. 计算尾数$M=M_1\cdot M_2$
	4. 调整：
		- 若尾数$M\ge 2$，则令$M=M/2,E=E+1$（右移补位）
		- 将$M$舍入为$t$位，符合尾数的精度
- 加法：
	1. 先进行**阶对齐**：令$E=\max(E_1,E_2)$，将阶码小的数的尾数右移，直到阶码相等
	2. 计算符号位$s=s_1 \oplus s_2$
	3. 计算尾数$M=M_1+M_2$（若符号不同，则为减法）
	4. 调整：
		- 若尾数$M<1$，则令$M=M\cdot 2,E=E-1$（左移补位）
		- 若尾数$M\ge 2$，则令$M=M/2,E=E+1$（右移补位）
		- 将$M$舍入为$t$位，符合尾数的精度
- 性质：浮点数的运满足交换律，有乘法单位元，但由于溢出和舍入失去精度，不满足结合律
# 浮点数和整数的转换
- 整数转单精度浮点数：按照舍入规则进行舍入
- 整数转双精度浮点数：直接转化，没有舍入误差
- 浮点数转整数：直接截断小数部分，按舍入规则舍入