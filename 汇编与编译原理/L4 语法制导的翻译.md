# 语义处理概述
- 语义处理在语法分析之后进行：
	- 静态语义分析：类型检查、作用域检查等
	- 中间/目标代码生成：从语义分析的结果生成中间代码或目标代码
- 语义处理技术：语法制导的语义处理，应用基本的语法制导定义
# 语法制导定义(SDD)
- **属性文法**：在上下文无关文法的基础上，为每个文法符号和产生式定义属性和语义规则
	- **属性**：刻画文法符号的某些语义信息，例如符号值、类型、存储地址等。符号$X$的属性记为$X.a$，其中$a$是属性名
	- **语义规则**：每个产生式关联的计算属性值的规则，描述如何计算当前产生式中各个符号的属性值
		- 复写规则：类似赋值，例如$X.a := Y.b$
		- 基于语义函数的规则：例如$b:=f(c_1,c_2,\cdots,c_k)$或$f(c_1,c_2,\cdots,c_k)$，其中$f$是一个函数，$b,c_1,\cdots,c_k$是属性
	- **综合属性**：对关联于产生式$A\rightarrow \alpha$的语义规则$b:=f(c_1,c_2,\cdots,c_k)$，如果$b$是$A$的属性，则称$b$为$A$的一个综合属性
		- 用于自下而上地传递信息
		- 例：![[Pasted image 20251111135522.png]]![[Pasted image 20251111135938.png]]
	- **继承属性**：对关联于产生式$A\rightarrow \alpha$的语义规则$b:=f(c_1,c_2,\cdots,c_k)$，如果$b$是$\alpha$中某个符号的属性，则称$b$为该符号的一个继承属性
		- 用于自上而下地传递信息
		- 例：![[Pasted image 20251111140050.png]]![[Pasted image 20251111140100.png]]
# 基于SDD的语义处理
- 也即语法制导的语义处理，也称语法制导的翻译
- 基于树遍历的语义处理：
	- 步骤：
		1. 构造输入串的语法树
		2. 构造**依赖图**
		3. 若该依赖图无环，则按依赖图的一个拓扑排序顺序计算属性值；若有环，则这类SDD不是良定义的SDD
			- **良定义SDD**：对于该语义，当且仅当其规则集合能为分析树的属性集确定唯一的值
	- 依赖图的构造：
		- 算法：![[Pasted image 20251111140708.png]]
	- 例：
		- 对如下的SDD：![[Pasted image 20251111140754.png]]输入串"10.01"
		- 构造语法树：![[Pasted image 20251111140818.png]]
		- 为每个属性编号，建立为依赖图的节点：![[Pasted image 20251111141114.png]]
		- 根据依赖规则，划定依赖边，得到依赖图：![[Pasted image 20251111141131.png]]
		- 根据依赖图的拓扑排序，计算属性值：![[Pasted image 20251111141302.png]]
		- **带标注的语法树**：对各属性的计算也即对语法树的标注，例如：![[Pasted image 20251111141406.png]]
- 基于单遍历的语义处理






# 翻译方案