- 词法分析器：在编译器中负责将源代码转换为标记（tokens）的组件
	- 负责处理一个输入的字符流，并将其分解为有意义的符号，并构建一个符号表
# 词法分析的作用
- 词法分析中的概念：
	- **词法单元(token)**：由词法单元名称和属性值组成的对
		- 词法单元是编程语言中的最小有意义单位，通常包括关键字、标识符、常量、运算符和分隔符等
	- **词素**：词法单元的实例
		- 词素是源代码中的实际字符序列，对应于特定的词法单元
	- **模式**：描述词素结构的规则
		- 模式通常使用**正则表达式**来定义，用于匹配源代码中的词素
		- 例：
			- 关键字if的模式是"if"
			- 标识符的模式是字母后跟零个或多个字母或数字，也即正则表达式`[a-zA-Z][a-zA-Z0-9]*`
			- 整数常量的模式是一个或多个数字
	- 例：![[Pasted image 20250930102702.png]]
- 词法错误：
	- 词法错误是指在源代码中出现了不符合语言词法规则的字符序列
	- 例：标识符不能以数字开头，如果出现这样的情况，就会被识别为词法错误
	- 一般而言，词法错误是比较少的，在词法分析的阶段，很难发现一些很明显的语法错误
		- 例：`fi(a==f(x))`中，很难确认`fi`是关键字`if`的拼写错误，还是一个新的标识符
# 词法单元的归约
- [[形式语言与自动机/L0 绪论#形式语言基础|串]]和[[形式语言与自动机/L0 绪论#语言运算|语言及其运算]]
- [[L3 正则语言与正则表示#正则表示|正则表达式]]
- 正则定义：具有如下形式的定义序列
	- $d_1\rightarrow r_1$
	- $d_2\rightarrow r_2$
	- ...
	- $d_n\rightarrow r_n$
	- 其中，$d_i$是一个新的名字，称为定义名，$r_i$是一个正则表达式
	- 例：$$\begin{align}\text{digit}\rightarrow 0|1|2|3|4|5|6|7|8|9\\ \text{id}\rightarrow \text{letter}(\text{letter}|\text{digit})^*\\\text{letter}\rightarrow a|b|...|z|A|B|...|Z \end{align}$$
# 词法单元的识别
- 词法单元的识别是将输入的字符流转换为词法单元序列的过程
- **状态转换图**：一个自动机，表示词法识别的过程
	- 以每个词素为输入，通过状态转换图，最终到达一个终态，输出对应的词法单元
	- 例：
		- relop词法单元的状态转换图：![[Pasted image 20250930141542.png]]
		- digit词法单元的状态转换图：![[Pasted image 20250930141805.png]]
- 有限自动机：
	- [[L1 确定有限自动机(DFA)|确定有限自动机]]
	- [[L2 非确定有限自动机(NFA)|非确定有限自动机]]
# 从正则表达式到自动机
- 通用方法：正则表示 $\rightarrow$ NFA $\rightarrow$ DFA
- 基于DFA的优化：从正则表达式可以直接构建DFA：
	- 正则表达式的抽象语法树：
		- 通过递归下降的方式，从正则表达式构建其抽象语法树
		- 例：![[Pasted image 20250930145507.png]]